use bitvec::prelude::*;

fn main() {
    // Create a large BitVec and convert it into a BitBox.
    let mut bv = bitvec![0; 8065]; // The critical size mentioned in the issue discussion.

    // Perform some operations that might trigger the bug when converting to BitBox.
    for i in (0..bv.len()).step_by(2) {
        bv.set(i, true);
    }

    let bb = bv.into_boxed_bitslice();

    // Convert the BitBox into a Vec and then back into Box<[T]> to trigger the bug.
    let boxed_slice: Box<[u8]> = bb.into_vec().into_boxed_slice();
    
    println!("BitBox converted successfully. If there's no error, check other systems.");
}
