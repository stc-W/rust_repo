//! Demonstrates nb-connect’s sockaddr layout bug (fixed ≥ 1.0.3).

use std::net::{Ipv4Addr, SocketAddrV4};

fn main() {
    // A perfectly ordinary IPv4 loop-back address.
    let addr = SocketAddrV4::new(Ipv4Addr::new(127, 0, 0, 1), 80);

    // Attempt a *non-blocking* TCP connect.
    match nb_connect::tcp(addr) {
        Ok(_) => println!("ok: socket created (either connected or in-progress)"),
        Err(e) => println!("error: {e}"),
    }
}
