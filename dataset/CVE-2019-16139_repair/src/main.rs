// Import statements
extern crate compact_arena;

use compact_arena::{mk_arena, SmallArena};

fn main() {
    // Create two arenas with capacity 0
    mk_arena!(a, 0);
    mk_arena!(b, 0);

    // Initialize the arenas
    let mut a: SmallArena<'_, usize> = a;
    let b: SmallArena<'_, usize> = b;

    // Add an element to arena `a`
    let ix = a.add(0);

    // Attempt to access this index in arena `b`, which triggers the bug
    println!("{:?}", b[ix]);
}
